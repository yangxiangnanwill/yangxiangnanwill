{
    "version": "https://jsonfeed.org/version/1",
    "title": "Will • All posts by \"redis\" tag",
    "description": "愿你一生努力，一生被爱",
    "home_page_url": "https://github.com/yangxiangnanwill/yangxiangnanwill.github.io",
    "items": [
        {
            "id": "https://github.com/yangxiangnanwill/yangxiangnanwill.github.io/2024/01/03/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/Linux/Centos7/Centos7-Redis/",
            "url": "https://github.com/yangxiangnanwill/yangxiangnanwill.github.io/2024/01/03/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/Linux/Centos7/Centos7-Redis/",
            "title": "Centos7-Redis",
            "date_published": "2024-01-03T13:13:21.658Z",
            "content_html": "<h1 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h1><p>redis是由C语言开发，因此安装之前必须要确保服务器已经安装了gcc，可以通过如下命令查看机器是否安装：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">gcc -v<br></code></pre></td></tr></table></figure>\n\n<p>如果没有安装则通过以下命令安装：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">yum install -y gcc<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h1><blockquote>\n<p>下载redis安装包并解压，<a href=\"https://redis.io/download/#redis-downloads\">点击此链接跳转到</a>​<a href=\"https://redis.io/download/#redis-downloads\"><code>Redis</code></a>​<a href=\"https://redis.io/download/#redis-downloads\">下载页面</a></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd /opt<br><span class=\"hljs-meta prompt_\"></span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">下载，我是在opt下执行的下载，所以我的下载目录为：/opt/redis-&#123;version-number&#125;，这里按照自己的实际情况调整</span><br>wget https://github.com/redis/redis/archive/7.0.5.tar.gz<br>mv 7.0.5.tar.gz redis-7.0.5.tar.gz<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">解压</span><br>tar -zxvf redis-7.0.5.tar.gz<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">进入解压目录</span><br>cd redis-7.0.5<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">编译</span><br>make<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"指定安装目录并进行安装\"><a href=\"#指定安装目录并进行安装\" class=\"headerlink\" title=\"指定安装目录并进行安装\"></a>指定安装目录并进行安装</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">这里默认安装位置为:/usr/local/redis</span><br>make install PREFIX=/usr/local/redis<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"启动Redis服务\"><a href=\"#启动Redis服务\" class=\"headerlink\" title=\"启动Redis服务\"></a>启动Redis服务</h1><h2 id=\"直接启动（不建议使用）\"><a href=\"#直接启动（不建议使用）\" class=\"headerlink\" title=\"直接启动（不建议使用）\"></a>直接启动（不建议使用）</h2><blockquote>\n<p>直接启动，使用的是redis的默认配置，不建议直接默认启动！！！！</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">进入redis安装目录</span><br>cd /usr/local/redis/bin/<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">启动服务</span><br>./redis-server<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"通过守护进程方式启动\"><a href=\"#通过守护进程方式启动\" class=\"headerlink\" title=\"通过守护进程方式启动\"></a>通过守护进程方式启动</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">第一步：从 redis 的源码目录中复制 redis.conf 到 redis 的安装目录</span><br>cp /opt/redis-7.0.5/redis.conf /usr/local/redis/bin/<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">第二步：修改redis.conf配置文件</span><br>cd /usr/local/redis/bin/<br>vi redis.conf<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">修改内容如下：</span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">daemonize 的值从 no 修改成 <span class=\"hljs-built_in\">yes</span></span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">requirepass 123456 <span class=\"hljs-comment\"># 设置密码</span></span> <br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">127.0.0.1          <span class=\"hljs-comment\">#注释掉这行代码,以便外网访问</span></span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">第三步：启动服务</span><br>./redis-server redis.conf<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">第四步：查看进程来确定redis是否启动成功，非必须,建议查看</span><br>ps -ef |grep redis<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"停止Redis服务\"><a href=\"#停止Redis服务\" class=\"headerlink\" title=\"停止Redis服务\"></a>停止Redis服务</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">cd</span> /usr/local/redis/bin<br>./redis-cli shutdown<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"设置开机自动启动\"><a href=\"#设置开机自动启动\" class=\"headerlink\" title=\"设置开机自动启动\"></a>设置开机自动启动</h1><p>切换到&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;目录，创建redis.service文件。命令如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd /lib/systemd/system/<br>vim redis.service<br></code></pre></td></tr></table></figure>\n\n<p>文件内容如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">[Unit]<br>Description=redis-server<br>After=network.target<br><br>[Service]<br>Type=forking<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">ExecStart需要按照实际情况修改成自己的地址</span><br>ExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf<br>PrivateTmp=true<br><br>[Install]<br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure>\n\n<p>设置开启自动启动</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-comment\"># 开机自动启动</span><br>systemctl <span class=\"hljs-built_in\">enable</span> redis.service<br><span class=\"hljs-comment\"># 启动redis服务</span><br>systemctl start redis.service<br><span class=\"hljs-comment\"># 查看服务状态</span><br>systemctl status redis.service<br><span class=\"hljs-comment\"># 停止服务</span><br>systemctl stop redis.service<br><span class=\"hljs-comment\"># 取消开机自动启动(卸载服务)</span><br>systemctl disabled redis.service<br></code></pre></td></tr></table></figure>\n",
            "tags": [
                "CentOS7",
                "Redis"
            ]
        }
    ]
}